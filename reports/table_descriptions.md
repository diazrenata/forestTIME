# Tables (currently)

- [PLOT_INFO](#plot_info)
- [TREE_INFO](#tree_info)
- [PLOT](#plot)
- [TREE](#tree)

``` r
source(here::here("R", "filtering.R"))
library(duckdbfs)
```

    Warning: package 'duckdbfs' was built under R version 4.3.2

``` r
library(duckdb)
```

    Loading required package: DBI

``` r
library(ggplot2)
library(dplyr)
```

    Warning: package 'dplyr' was built under R version 4.3.2


    Attaching package: 'dplyr'

    The following objects are masked from 'package:stats':

        filter, lag

    The following objects are masked from 'package:base':

        intersect, setdiff, setequal, union

## PLOT_INFO

``` r
plot_info <- open_arrow_table_with_duck("PLOT_INFO") |>
  filter(PLOT_UNIQUE_ID %in% c("27_2_1_20400", "27_2_1_21053", "27_2_1_21054", "27_2_1_21055", "27_2_1_20206", "27_2_1_21007", "27_2_1_20829", "27_2_1_20401", "27_2_1_20667", "27_2_1_20943")) |>
  collect()

knitr::kable(plot_info)
```

| PLOT_UNIQUE_ID |  PLOT | UNITCD | NYEARS | FIRSTYR | LASTYR |      LAT |       LON | ELEV | LATS | LONS | ELEVS | COUNTYCD | STATECD |
|:---------------|------:|-------:|-------:|--------:|-------:|---------:|----------:|-----:|-----:|-----:|------:|---------:|--------:|
| 27_2_1_20400   | 20400 |      2 |      4 |    2002 |   2017 | 46.94337 | -93.59722 | 1270 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_21053   | 21053 |      2 |      5 |    2001 |   2021 | 46.95493 | -93.06332 | 1270 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_21054   | 21054 |      2 |      5 |    2001 |   2021 | 46.84855 | -93.07780 | 1250 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_21055   | 21055 |      2 |      5 |    2001 |   2021 | 46.68616 | -93.14339 | 1270 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_20206   | 20206 |      2 |      5 |    2001 |   2021 | 46.62859 | -93.17689 | 1240 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_21007   | 21007 |      2 |      4 |    2003 |   2018 | 46.53303 | -93.35758 | 1230 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_20829   | 20829 |      2 |      4 |    2003 |   2018 | 46.58915 | -93.54039 | 1210 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_20401   | 20401 |      2 |      4 |    2003 |   2018 | 46.44121 | -93.40811 | 1270 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_20667   | 20667 |      2 |      4 |    2003 |   2018 | 46.52011 | -93.54296 | 1260 |    1 |    1 |     1 |        1 |      27 |
| 27_2_1_20943   | 20943 |      2 |      4 |    2003 |   2018 | 46.43323 | -93.57835 | 1280 |    1 |    1 |     1 |        1 |      27 |

## TREE_INFO

``` r
tree_info <- open_arrow_table_with_duck("TREE_INFO") |>
  filter(PLOT_UNIQUE_ID %in% c("27_2_1_20400", "27_2_1_21053", "27_2_1_21054", "27_2_1_21055", "27_2_1_20206", "27_2_1_21007", "27_2_1_20829", "27_2_1_20401", "27_2_1_20667", "27_2_1_20943")) |>
  collect()

knitr::kable(head(tree_info))
```

| TREE_UNIQUE_ID   | PLOT_UNIQUE_ID | NYEARS | NYEARS_MEASURED | FIRSTYR | LASTYR | SPCD |  PLOT | SUBPLOT | SPCDS | COUNTYCD | STATECD |
|:-----------------|:---------------|-------:|----------------:|--------:|-------:|-----:|------:|--------:|------:|---------:|--------:|
| 27_2_1_21053_1_1 | 27_2_1_21053   |      5 |               5 |    2001 |   2021 |   71 | 21053 |       1 |     1 |        1 |      27 |
| 27_2_1_21053_1_2 | 27_2_1_21053   |      5 |               5 |    2001 |   2021 |   71 | 21053 |       1 |     1 |        1 |      27 |
| 27_2_1_21053_1_3 | 27_2_1_21053   |      5 |               5 |    2001 |   2021 |   71 | 21053 |       1 |     1 |        1 |      27 |
| 27_2_1_21053_1_7 | 27_2_1_21053   |      5 |               5 |    2001 |   2021 |   71 | 21053 |       1 |     1 |        1 |      27 |
| 27_2_1_21053_1_4 | 27_2_1_21053   |      5 |               5 |    2001 |   2021 |   71 | 21053 |       1 |     1 |        1 |      27 |
| 27_2_1_21053_1_5 | 27_2_1_21053   |      5 |               5 |    2001 |   2021 |   95 | 21053 |       1 |     1 |        1 |      27 |

## PLOT

``` r
plot_raw <- open_arrow_table_with_duck(table = "PLOT") |>
  filter(PLOT_UNIQUE_ID %in% c("27_2_1_20400", "27_2_1_21053", "27_2_1_21054", "27_2_1_21055", "27_2_1_20206", "27_2_1_21007", "27_2_1_20829", "27_2_1_20401", "27_2_1_20667", "27_2_1_20943")) |>
  collect()

knitr::kable(head(plot_raw))
```

|           CN |  PREV_PLT_CN | INVYR | UNITCD |  PLOT | PLOT_STATUS_CD | PLOT_NONSAMPLE_REASN_CD | MEASYEAR | MEASMON | MEASDAY | REMPER | KINDCD | DESIGNCD | RDDISTCD | WATERCD |      LAT |       LON | ELEV | PLOT_UNIQUE_ID | COUNTYCD | STATECD |
|-------------:|-------------:|------:|-------:|------:|---------------:|------------------------:|---------:|--------:|--------:|-------:|-------:|---------:|---------:|--------:|---------:|----------:|-----:|:---------------|---------:|--------:|
| 3.727849e+14 | 2.423799e+14 |  2017 |      2 | 20400 |              1 |                      NA |     2017 |       3 |      16 |    4.5 |      2 |        1 |        4 |       0 | 46.94337 | -93.59722 | 1270 | 27_2_1_20400   |        1 |      27 |
| 3.001620e+14 | 2.213472e+14 |  2016 |      2 | 21053 |              1 |                      NA |     2016 |       2 |       2 |    5.0 |      2 |        1 |        8 |       2 | 46.95493 | -93.06332 | 1270 | 27_2_1_21053   |        1 |      27 |
| 3.001621e+14 | 2.213472e+14 |  2016 |      2 | 21054 |              1 |                      NA |     2016 |       2 |       1 |    5.1 |      2 |        1 |        8 |       0 | 46.84855 | -93.07780 | 1250 | 27_2_1_21054   |        1 |      27 |
| 3.001621e+14 | 2.213472e+14 |  2016 |      2 | 21055 |              1 |                      NA |     2016 |       1 |      27 |    5.0 |      2 |        1 |        7 |       2 | 46.68616 | -93.14339 | 1270 | 27_2_1_21055   |        1 |      27 |
| 3.001621e+14 | 2.213472e+14 |  2016 |      2 | 20206 |              2 |                      NA |     2016 |       6 |       1 |    5.0 |      2 |        1 |       NA |      NA | 46.62859 | -93.17689 | 1240 | 27_2_1_20206   |        1 |      27 |
| 1.574004e+13 | 1.021445e+14 |  2013 |      2 | 21007 |              1 |                      NA |     2013 |       5 |      15 |    4.8 |      2 |        1 |        6 |       0 | 46.53303 | -93.35758 | 1230 | 27_2_1_21007   |        1 |      27 |

## TREE

``` r
tree_raw <- open_arrow_table_with_duck("TREE") |>
  filter(PLOT_UNIQUE_ID %in% c("27_2_1_20400", "27_2_1_21053", "27_2_1_21054", "27_2_1_21055", "27_2_1_20206", "27_2_1_21007", "27_2_1_20829", "27_2_1_20401", "27_2_1_20667", "27_2_1_20943")) |>
  collect()

knitr::kable(head(tree_raw))
```

|           CN | PREV_TRE_CN |       PLT_CN | INVYR | UNITCD | SUBP | TREE |  PLOT | STATUSCD | DIA |  HT | ACTUALHT | SPCD | CYCLE | TREE_UNIQUE_ID   | PLOT_UNIQUE_ID | COUNTYCD | STATECD |
|-------------:|------------:|-------------:|------:|-------:|-----:|-----:|------:|---------:|----:|----:|---------:|-----:|------:|:-----------------|:---------------|---------:|--------:|
| 6.558522e+13 |          NA | 6.558517e+13 |  2001 |      2 |    1 |    1 | 21053 |        2 | 5.7 |  32 |       31 |   71 |    12 | 27_2_1_21053_1_1 | 27_2_1_21053   |        1 |      27 |
| 6.558523e+13 |          NA | 6.558517e+13 |  2001 |      2 |    1 |    2 | 21053 |        1 | 5.3 |  30 |       30 |   71 |    12 | 27_2_1_21053_1_2 | 27_2_1_21053   |        1 |      27 |
| 6.558523e+13 |          NA | 6.558517e+13 |  2001 |      2 |    1 |    3 | 21053 |        1 | 5.1 |  30 |       30 |   71 |    12 | 27_2_1_21053_1_3 | 27_2_1_21053   |        1 |      27 |
| 6.558526e+13 |          NA | 6.558517e+13 |  2001 |      2 |    1 |    7 | 21053 |        1 | 3.6 |  26 |       NA |   71 |    12 | 27_2_1_21053_1_7 | 27_2_1_21053   |        1 |      27 |
| 6.558524e+13 |          NA | 6.558517e+13 |  2001 |      2 |    1 |    4 | 21053 |        1 | 5.3 |  28 |       28 |   71 |    12 | 27_2_1_21053_1_4 | 27_2_1_21053   |        1 |      27 |
| 6.558525e+13 |          NA | 6.558517e+13 |  2001 |      2 |    1 |    5 | 21053 |        1 | 2.3 |  19 |       NA |   95 |    12 | 27_2_1_21053_1_5 | 27_2_1_21053   |        1 |      27 |
